
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>考勤管理</title>

    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm.css">
    <script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.js' charset='utf-8'></script>
    <!--如果你用到了拓展包中的组件，还需要引用下面两个-->
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm-extend.css">
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm-extend.js' charset='utf-8'></script>

    <style>
        .buttonstyBlue {
            background-color: steelblue; /* Green  #008CBA*/
            border: none;
            color: white;
            padding: 5px 5px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 18px;
            margin: 4px 2px;
            cursor: pointer;
        }

        .buttonstyRead {
            background-color: #f44336; /* Green  #008CBA*/
            border: none;
            color: white;
            padding: 5px 5px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 18px;
            margin: 4px 2px;
            cursor: pointer;
        }

        .buttonstyGray {
            background-color: #e7e7e7;
            border: none;
            color: black;
            padding: 5px 5px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 18px;
            margin: 4px 2px;
            cursor: pointer;
        }

        .buttonselect {
            background-color: #e7e7e7;
            border: none;
            color: black;
            padding: 2px 2px 2px 2px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 15px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }

        .buttonselected {
            background-color: white;
            color: black;
            border: 0.5px solid #f44336;
            color: #f44336;
            padding: 2px 2px 2px 2px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 15px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }

        .divgridDay {
            width: 100%;
            background-color: white;
            font-size: 16px;
            height: 30px;
            border-left: 1px solid gray;
            border-right: 1px solid gray;
            border-bottom: 1px solid gray;
        }
    </style>
</head>
<body style="padding-top:0px;">
   
    <div class="page">
        <header class="bar bar-nav">
           
<h1 class="title" style="background-color:steelblue;"><label style="color:white">请假申请</label></h1>
            
        </header>
        @{ 
            Market.APIService.Controllers.QJAllowModel Pdata = (Market.APIService.Controllers.QJAllowModel)ViewData["model"];
            String userId = (String)ViewData["userId"];

        }
        <div id="Dview" class="content" style="padding-top:0px;">
            <div class="list-block">
                <ul>
                    <!-- Text inputs -->
                    <!-- Date -->
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">姓名</div>
                                <div class="item-input">
                                    @Pdata.name
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">工号</div>
                                <div class="item-input">
                                    @Pdata.workNumber
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">日期起</div>
                                <div class="item-input">
                                    @Pdata.startDay
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">日期止</div>

                                <div class="item-input">
                                    @Pdata.endDay
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-gender"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">类型</div>

                                
                                   @{
                                       string type = "";
                                       if (Pdata.leaveType.Equals("1"))
                                       {
                                           type = "产假";
                                       }
                                       else if (Pdata.leaveType.Equals("2"))
                                       {
                                           type = "病假";
                                       }
                                       else if (Pdata.leaveType.Equals("3"))
                                       {
                                           type = "事假";
                                       }
                                       else if (Pdata.leaveType.Equals("4"))
                                       {
                                           type = "婚假";
                                       }
                                       else if (Pdata.leaveType.Equals("5"))
                                       {
                                           type = "丧假";
                                       }
                                       else if (Pdata.leaveType.Equals("6"))
                                       {
                                           type = "护理假";
                                       }
                                       else if (Pdata.leaveType.Equals("7"))
                                       {
                                           type = "年休假";
                                       }
                                       else if (Pdata.leaveType.Equals("8"))
                                       {
                                           type = "休息";
                                       }
                                    <div class="item-input">@type</div>
                                }
                                
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">状态</div>
                                @{
                                    if (Pdata.state.Equals("1"))
                                    {
                                        <div class="item-input">未确认</div>
                                    }
                                    else if (Pdata.state.Equals("2"))
                                    {
                                        <div class="item-input" style="color:green;">已确认</div>
                                    }
                                    else if (Pdata.state.Equals("3"))
                                    {
                                        <div class="item-input" style="color:red;">已拒绝</div>
                                    }
                                }
                            </div>
                        </div>
                    </li>
                    <li class="align-top">
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-form-comment"></i></div>
                            <div class="item-inner">
                                <div class="item-title label">备注</div>
                                <div class="item-input">
                                    <textarea id="desc" readonly="readonly">@Pdata.desc</textarea>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
@{
    if (Pdata.state.Equals("1"))
    {
            <div class="content-block" id="buttonView">
                <div class="row">
                    
                        <div class="col-50"><a href="#" class="button button-big button-fill button-danger" onclick="CheckAllowButton(3)">拒绝</a></div>
                        <div class="col-50"><a href="#" class="button button-big button-fill button-success" onclick="CheckAllowButton(2)">同意</a></div>
                           

                    <script>
            function CheckAllowButton(state) {
                var r2 = "AllowLeave?id=" + '@Pdata.id' + "&state=" + state + "&userId="+'@userId'


                // alert(r);
                $.ajax({
                    url: r2,
                    type: "Post",
                    data: {

                    },
                    success: function (data) {
                        $("#buttonView").hide();
                        //TODO:处理添加新问卷成功后的事件
                        $.toast(data);

                    },

                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $.toast("操作失败");

                    }
                });
            }
                    </script>
                </div>
            </div>
    }
}
        </div>
       
    </div>
    
</body>
</html>
